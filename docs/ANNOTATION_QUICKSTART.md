# 🚀 数据标注快速开始指南

## ✅ 已完成

- [x] 数据集整理完成
- [x] 工作空间创建完成
- [x] 类别文件生成完成
- [x] 292张图片已准备就绪

## 📊 数据集概览

| 项目 | 数值 |
|------|------|
| 总图片数 | 292 张 |
| 角色数量 | 19 个 |
| 平均每角色 | 15.4 张 |
| 最多图片 | luxiya (露西亚) - 43 张 |
| 最少图片 | qu (曲) - 2 张 |

## 🎯 下一步：开始标注

### 步骤 1: 安装 LabelImg

```bash
pip install labelImg
```

### 步骤 2: 启动 LabelImg

```bash
labelImg
```

### 步骤 3: 配置 LabelImg

1. **打开图片目录**
   - 点击 "Open Dir"
   - 选择: `annotation_workspace/images/`

2. **设置保存目录**
   - 点击 "Change Save Dir"
   - 选择: `annotation_workspace/labels/`

3. **选择 YOLO 格式**
   - 点击左下角确保显示 "YOLO"
   - 如果不是，点击切换到 YOLO 格式

4. **启用自动保存**
   - 点击菜单 "View" → "Auto Save mode"

5. **加载类别文件**
   - LabelImg 会自动读取 `annotation_workspace/classes.txt`

### 步骤 4: 开始标注

#### 标注流程

1. **创建边界框**: 按 `W` 键，在图片上拖拽绘制矩形
2. **选择类别**: 从弹出列表选择角色名称
3. **调整边界框**: 拖动边缘调整大小，拖动中心移动位置
4. **保存**: 按 `Ctrl+S` (自动保存模式下会自动保存)
5. **下一张**: 按 `D` 键

#### 快捷键速查

| 快捷键 | 功能 |
|--------|------|
| `W` | 创建边界框 |
| `D` | 下一张图片 |
| `A` | 上一张图片 |
| `Del` | 删除选中的边界框 |
| `Ctrl+S` | 保存 |
| `Space` | 标记为已验证 |

#### 标注原则

✅ **正确做法**:
- 边界框紧密贴合角色轮廓
- 包含角色的头部、身体和主要特征
- 留出5-10像素的适当边距
- 一张图多个角色时，分别标注每个

❌ **错误做法**:
- 边界框过大，包含大量背景
- 边界框过小，裁切了角色特征
- 类别标签选择错误
- 遗漏图片中的某些角色

### 步骤 5: 定期验证

每标注50张图片后，运行验证脚本：

```bash
python validate_annotations.py
```

这会检查：
- 标注文件格式是否正确
- 坐标是否在有效范围内
- 是否有遗漏的图片
- 类别分布统计

### 步骤 6: 可视化检查

标注完成后，生成可视化结果：

```bash
python visualize_annotations.py
```

这会在 `annotation_workspace/visualizations/` 目录生成带边界框的图片，方便检查标注质量。

### 步骤 7: 划分数据集

所有标注完成并验证通过后：

```bash
python split_dataset.py
```

这会自动划分数据集为：
- 训练集: 70% (约204张)
- 验证集: 15% (约44张)
- 测试集: 15% (约44张)

## ⏱️ 预计时间

- **标注时间**: 3-5小时 (每张30-60秒)
- **验证时间**: 30分钟
- **可视化检查**: 30分钟
- **总计**: 4-6小时

## 💡 标注技巧

1. **保持一致性**: 所有图片使用相同的标注标准
2. **定期休息**: 每标注50张休息5-10分钟
3. **从简单开始**: 先标注清晰、单角色的图片
4. **记录问题**: 遇到难以标注的图片，记录下来

## 📁 文件结构

```
annotation_workspace/
├── images/              # 292张待标注图片
├── labels/              # 标注文件输出目录 (你需要创建)
├── visualizations/      # 可视化结果 (运行脚本后生成)
├── classes.txt          # 19个角色类别
├── character_mapping.txt # 角色ID映射表
└── README.txt           # 工作空间说明
```

## 🆘 常见问题

### Q: 图片中角色很小怎么办？
A: 如果角色占图片面积<5%，可以考虑不标注。如果是重要样本，尽量标注。

### Q: 角色被严重遮挡怎么办？
A: 如果可见部分>50%，标注可见部分。如果<50%，可以跳过。

### Q: 同一角色的不同形态怎么标注？
A: 统一标注为同一类别。例如"露西亚·黎明"和"露西亚·深红之渊"都标注为"luxiya"。

### Q: 背景中有角色海报怎么办？
A: 只标注真实的角色，不标注海报、屏幕中的图片等。

## 📞 需要帮助？

- 查看详细指南: `annotation_guide.md`
- 查看任务列表: `.kiro/specs/character-recognition/tasks.md`
- 查看角色映射: `annotation_workspace/character_mapping.txt`

## ✨ 标注完成后

标注完成后，你将拥有：
- ✅ 292张已标注的图片
- ✅ 对应的YOLO格式标注文件
- ✅ 划分好的训练/验证/测试集
- ✅ 可以开始训练目标检测模型！

---

**开始标注吧！加油！💪**
