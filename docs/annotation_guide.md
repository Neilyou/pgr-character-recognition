# 战双角色图像标注指南

## 数据集概览

**数据源**: `战双人物图像_调整尺寸/`
**角色数量**: 19个
**总图片数**: 约292张

### 角色列表及图片数量

| 角色文件夹 | 图片数量 | 角色名称（推测） |
|-----------|---------|----------------|
| 21hao | 12 | 21号 |
| aerfa | 21 | 阿尔法 |
| aila | 14 | 艾拉 |
| bianka | 15 | 比安卡 |
| dubian | 7 | 渡边 |
| kaleinina | 11 | 卡列尼娜 |
| kuluomu | 15 | 库洛姆 |
| lee | 34 | 里 |
| lifu | 33 | 丽芙 |
| luna | 15 | 露娜 |
| luosaita | 16 | 罗塞塔 |
| luxiya | 43 | 露西亚 |
| nuoan | 11 | 诺安 |
| qishi | 7 | 七实 |
| qu | 2 | 曲 |
| sailinna | 11 | 赛琳娜 |
| shenwei | 5 | 神威 |
| wanshi | 5 | 万事 |
| weila | 15 | 薇拉 |

## 标注工具选择

### 推荐工具：LabelImg

**优点**:
- 简单易用，图形界面友好
- 支持 YOLO 和 PASCAL VOC 格式
- 快捷键操作高效
- 免费开源

### 安装 LabelImg

```bash
# 使用 pip 安装
pip install labelImg

# 或使用 conda 安装
conda install -c conda-forge labelimg
```

### 启动 LabelImg

```bash
labelImg
```

## 标注流程

### 1. 准备工作

1. **创建标注目录结构**:
```
annotation_workspace/
├── images/              # 所有待标注图片
├── labels/              # 标注文件输出目录
└── classes.txt          # 类别列表文件
```

2. **运行准备脚本**（我会为你创建）:
```bash
python prepare_annotation.py
```

### 2. 配置 LabelImg

1. 打开 LabelImg
2. 点击 "Open Dir" 选择 `annotation_workspace/images/`
3. 点击 "Change Save Dir" 选择 `annotation_workspace/labels/`
4. 点击 "View" → "Auto Save mode" 启用自动保存
5. 确保左下角显示 "YOLO" 格式

### 3. 标注规范

#### 边界框绘制原则

1. **完整包含角色**
   - 边界框应完整包含角色的头部、身体和主要特征
   - 留出适当边距（约5-10像素）
   - 不要裁切角色的关键部位

2. **紧凑但不过紧**
   - 避免包含过多背景
   - 避免框得太紧导致特征丢失
   - 如果角色被部分遮挡，框住可见部分

3. **多角色处理**
   - 如果一张图片中有多个角色，分别标注每个角色
   - 每个角色一个独立的边界框
   - 确保类别标签正确

4. **边界情况**
   - 如果角色只露出一小部分（<30%），可以不标注
   - 如果角色模糊不清，可以跳过
   - 如果不确定是哪个角色，标记为 "unknown" 或跳过

#### 标注步骤

1. **打开图片**: 使用 `D` 键或点击 "Next Image"
2. **创建边界框**: 
   - 按 `W` 键或点击 "Create RectBox"
   - 在图片上拖拽绘制矩形框
3. **选择类别**: 从弹出的列表中选择角色名称
4. **调整边界框**: 
   - 拖动边框边缘调整大小
   - 拖动边框中心移动位置
5. **保存**: 按 `Ctrl+S` 或自动保存
6. **下一张**: 按 `D` 键

#### 快捷键

| 快捷键 | 功能 |
|-------|------|
| W | 创建边界框 |
| D | 下一张图片 |
| A | 上一张图片 |
| Del | 删除选中的边界框 |
| Ctrl+S | 保存 |
| Ctrl+D | 复制当前边界框 |
| Space | 标记当前图片为已验证 |

### 4. 质量检查

标注完成后，进行质量检查：

1. **运行验证脚本**:
```bash
python validate_annotations.py
```

2. **检查项目**:
   - 每张图片是否都有标注文件
   - 边界框坐标是否在有效范围内（0-1）
   - 类别ID是否正确
   - 是否有遗漏的图片

3. **可视化检查**:
```bash
python visualize_annotations.py
```

## 标注质量标准

### 优秀标注示例 ✅

- 边界框紧密贴合角色轮廓
- 包含角色的所有关键特征
- 类别标签准确无误
- 多角色场景中每个角色都被标注

### 不良标注示例 ❌

- 边界框过大，包含大量背景
- 边界框过小，裁切了角色特征
- 类别标签错误
- 遗漏了图片中的某些角色

## 数据集划分

标注完成后，将数据集划分为：

- **训练集**: 70% (约204张)
- **验证集**: 15% (约44张)
- **测试集**: 15% (约44张)

运行划分脚本：
```bash
python split_dataset.py
```

## 预计工作量

- **单张图片标注时间**: 30-60秒
- **总标注时间**: 约3-5小时
- **质量检查时间**: 约1小时
- **总计**: 4-6小时

## 注意事项

1. **保持一致性**: 所有图片使用相同的标注标准
2. **定期保存**: 虽然有自动保存，但建议定期手动保存
3. **休息**: 每标注50张图片休息5-10分钟，保持注意力
4. **记录问题**: 遇到难以标注的图片，记录下来后续讨论

## 常见问题

### Q: 图片中角色很小怎么办？
A: 如果角色占图片面积<5%，可以考虑不标注。如果是重要样本，尽量标注。

### Q: 角色被严重遮挡怎么办？
A: 如果可见部分>50%，标注可见部分。如果<50%，可以跳过。

### Q: 同一角色的不同形态怎么标注？
A: 统一标注为同一类别。例如"露西亚·黎明"和"露西亚·深红之渊"都标注为"luxiya"。

### Q: 背景中有角色海报或图片怎么办？
A: 只标注真实的角色，不标注海报、屏幕中的图片等。

## 下一步

标注完成后：
1. 运行质量检查脚本
2. 查看标注统计报告
3. 开始训练目标检测模型

---

**标注开始日期**: ___________
**预计完成日期**: ___________
**实际完成日期**: ___________
